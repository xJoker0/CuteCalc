name: Android CI

on:
  push:
      branches: [ "main" ]
        pull_request:
            branches: [ "main" ]

            jobs:
              build:
                  runs-on: ubuntu-latest

                      steps:
                          - uses: actions/checkout@v4

                              - name: Set up JDK 17
                                    uses: actions/setup-java@v4
                                          with:
                                                  java-version: '17'
                                                          distribution: 'temurin'
                                                                  cache: gradle

                                                                      - name: Setup Android SDK
                                                                            uses: android-actions/setup-android@v3

                                                                                - name: Grant execute permission for gradlew
                                                                                      run: chmod +x gradlew

                                                                                          # debug APK を作る（署名不要）
                                                                                              - name: Build debug APK
                                                                                                    run: ./gradlew assembleDebug --no-daemon

                                                                                                        # ビルド成果物（APK）をアップロード
                                                                                                            - name: Upload APK artifact
                                                                                                                  uses: actions/upload-artifact@v4
                                                                                                                        with:
                                                                                                                                name: app-apks
                                                                                                                                        path: app/build/outputs/**/*.apk
                                                                                                                                                # retention-days: 30   # 必要なら保持日数を指定
                                                                                                                                                